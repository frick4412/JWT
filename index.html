<!doctype html>
<html>
<head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.0/jquery.min.js"></script>
    <script src="js/scJwt.js"></script>
    <script src="lib/hmac-sha256.min.js"></script>
    <script src="lib/enc-base64.js"></script>
    <link rel="icon" type="image/png" href="./favicon.png" />
    <!--
    <script src="node_modules/fast-sha256/sha256.min.js"></script>
    <script src="node_modules/js-sha256/src/sha256.js"></script>
    <script src="http://kjur.github.io/jsrsasign/jsrsasign-latest-all-min.js"></script>
    -->
</head>
<body>
	<h1>JWT Testing</h1>
    <button id="myBtn">Go!</button><br />
    <div id="data">Processing...</div>
    <script>
        /*
        // Header
        var oHeader = {alg: 'HS256', typ: 'JWT'};
        // Payload
        var oPayload = {};
        var tNow = KJUR.jws.IntDate.get('now');
        var tEnd = KJUR.jws.IntDate.get('now + 1day');
        oPayload.iss = "http://foo.com";
        oPayload.sub = "mailto:mike@foo.com";
        oPayload.nbf = tNow;
        oPayload.iat = tNow;
        oPayload.exp = tEnd;
        oPayload.jti = "id123456";
        oPayload.aud = "http://foo.com/employee";
        oPayload.formdata = null;
        oPayload.data = null;
        // Sign JWT, password=616161
        var sHeader = JSON.stringify(oHeader);
        var sPayload = JSON.stringify(oPayload);
        var sJWT = KJUR.jws.JWS.sign("HS256", sHeader, sPayload, "12345");
        */
        
        
        var data = null;
        var formdata = null;
        var objJwt = new Jwt("jwt-test","http://scrombie.sytes.net/jwt-test/getBooks",null,null);
        var jwt = objJwt.jwt();
        
        $("#myBtn").click(function() {
            $.ajax({
                type: "get",
                url: "http://scrombie.sytes.net/jwt-test/api/getBooks",
                dataType: "json",
                data: {jwt:jwt},
                //headers: {jwt:jwt}
            }).done(function(data) {
                $("#data").html(data);
            });        
        });
    </script>
</body>
</html>
